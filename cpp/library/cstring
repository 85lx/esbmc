#ifndef STL_CSTRING
#define STL_CSTRING

char *strcpy(char *dest, const char* src)
{
	__ESBMC_HIDE:
	char *ret = dest;
    while (*dest++ = *src++)
        ;
    return ret;
}

char *strncpy(char *dest, const char *src, size_t n)
{
	__ESBMC_HIDE:
	char *ret = dest;
    do {
        if (!n--)
            return ret;
    } while (*dest++ = *src++);
    while (n--)
        *dest++ = 0;
    return ret;
}

char *strcat(char *dst, const char *src)
{
	__ESBMC_HIDE:
	char *ret = dst;
	while (*dst)
		dst++;
	while (*dst++ = *src++)
		;
	return ret;
}

char *strncat(char *dst, const char *src, size_t n)
{
	__ESBMC_HIDE:
	char *ret = dst;
	while (*dst)
		dst++;
	while (n--)
		if (!(*dst++ = *src++))
			return ret;
	*dst = 0;
	return ret;
}

int strcmp(const char *s1, const char *s2)
{
	__ESBMC_HIDE:
	while(*s1 && (*s1==*s2))
		s1++,s2++;
	return *(const unsigned char*)s1-*(const unsigned char*)s2;
}

int strncmp(const char* s1, const char* s2, size_t n)
{
	__ESBMC_HIDE:
    while(n--)
        if(*s1++!=*s2++)
            return *(unsigned char*)(s1 - 1) - *(unsigned char*)(s2 - 1);
    return 0;
}

char *strchr(const char *s, int c)
{
    while (*s != (char)c)
        if (!*s++)
            return 0;
    return (char *)s;
}

size_t strcspn(const char *s1, const char *s2)
{
    size_t ret=0;
    while(*s1)
        if(strchr(s2,*s1))
            return ret;
        else
            s1++,ret++;
    return ret;
}

size_t strspn(const char *s1, const char *s2)
{
    size_t ret=0;
    while(*s1 && strchr(s2,*s1++))
        ret++;
    return ret;
}

char* strtok(char* str, const char* delim)
{
#if 0
	static char* p=0;
	if(str)
		p=str;
	else if(!p)
		return 0;
	str=p+strspn(p,delim);
	p=str+strcspn(str,delim);
	if(p==str)
		return p=0;
	p = *p ? *p=0,p+1 : 0;
	return str;
#endif
	return nondet_charPointer();
}

size_t strlen(const char *s)
{
	__ESBMC_HIDE:
	const char *p = s;
	while (*s) ++s;
	return s - p;
}

const char * strpbrk ( const char * str1, const char * str2 );
      char * strpbrk (       char * str1, const char * str2 );

const char * strrchr ( const char * str, int character );
      char * strrchr (       char * str, int character );

const char * strstr ( const char * str1, const char * str2 );
      char * strstr (       char * str1, const char * str2 );

void * memcpy ( void * destination, const void * source, size_t num );

void * memmove ( void * destination, const void * source, size_t num );

int memcmp ( const void * ptr1, const void * ptr2, size_t num );

const void * memchr ( const void * ptr, int value, size_t num );
      void * memchr (       void * ptr, int value, size_t num );

void * memset ( void * ptr, int value, size_t num );

#endif
